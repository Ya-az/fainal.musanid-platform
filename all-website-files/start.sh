#!/bin/bash
# تثبيت المتطلبات وتشغيل الموقع

# إنشاء ملف بيئة للخادم الخلفي
echo "PORT=5000
NODE_ENV=development" > .env

# تثبيت اعتماديات الخادم الخلفي
cd backend
npm install
echo "تم تثبيت اعتماديات الخادم الخلفي بنجاح"

# تشغيل الخادم الخلفي في الخلفية
echo "جاري تشغيل الخادم الخلفي..."
npm run dev &

# تثبيت اعتماديات الواجهة الأمامية
cd ../frontend
npm install
echo "تم تثبيت اعتماديات الواجهة الأمامية بنجاح"

# تشغيل الواجهة الأمامية
echo "جاري تشغيل الواجهة الأمامية..."
echo "بمجرد اكتمال التشغيل، يمكنك الوصول إلى الموقع على http://localhost:3000"
npm start

# إيقاف جميع العمليات عند الخروج
trap "kill 0" EXIT