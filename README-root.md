# منصة مساند التعليمية

منصة تعليمية متخصصة في مجال تطوير الويب وتقنية المعلومات

## هيكل المشروع الجديد

تم تحسين هيكل المشروع ليكون مقسمًا إلى قسمين رئيسيين:

### 1. واجهة المستخدم (client)
موجودة في مجلد `client` وتحتوي على:
- `public`: الملفات المنتجة النهائية
- `src`: مصادر الكود للواجهة الأمامية
  - `assets`: الموارد الثابتة (صور، أنماط، سكريبتات)
  - `components`: مكونات واجهة المستخدم القابلة لإعادة الاستخدام
  - `pages`: صفحات الموقع
  - `utils`: أدوات وتوابع مساعدة

### 2. الخادم (server)
موجود في مجلد `server` ويحتوي على:
- `app.js`: نقطة بدء تشغيل الخادم
- `config`: إعدادات التطبيق
- `controllers`: متحكمات المسارات
- `models`: نماذج قاعدة البيانات
- `routes`: مسارات API
- `views`: قوالب العرض
- `scripts`: سكريبتات مساعدة للتطوير والنشر

## متطلبات التشغيل
- Node.js v18 أو أعلى
- MongoDB v6 أو أعلى (أو MySQL 8+)
- npm أو yarn

## تثبيت المشروع
```bash
# تثبيت اعتماديات الخادم
cd server
npm install

# تثبيت اعتماديات الواجهة الأمامية
cd ../client
npm install
```

```bash
# تهيئة قاعدة البيانات وإنشاء مستخدم أولي
cd server
npm run seed:user
```

## تشغيل المشروع
```bash
# تشغيل خادم التطوير
cd server
npm run dev

# تشغيل واجهة المستخدم في وضع التطوير
cd ../client
npm run dev
```

إذا كنت تستخدم Windows PowerShell، استخدم هذه الأوامر:
```powershell
# تشغيل خادم التطوير
cd server
npm run dev

# في نافذة أخرى، تشغيل واجهة المستخدم
cd ../client
npm run dev
```

## هيكل المشروع بالتفصيل
```
musanid/
│
├── client/                 # كافة ملفات واجهة المستخدم
│   ├── public/             # الملفات العامة والثابتة
│   │   ├── index.html
│   │   ├── manifest.json
│   │   ├── sw.js
│   │   └── ...
│   │
│   ├── src/                # كود المصدر للواجهة الأمامية
│   │   ├── assets/         # الموارد (صور، أنماط، إلخ)
│   │   ├── components/     # مكونات واجهة المستخدم القابلة لإعادة الاستخدام
│   │   ├── pages/          # صفحات التطبيق الرئيسية
│   │   ├── utils/          # وظائف مساعدة
│   │   └── config.js       # ملف التكوين للواجهة الأمامية
│   │
│   ├── package.json        # اعتماديات الواجهة الأمامية
│   └── tailwind.config.js  # تكوين Tailwind CSS
│
└── server/                 # كود الخادم
    ├── app.js              # نقطة الدخول للتطبيق
    ├── config/             # ملفات الإعدادات
    ├── controllers/        # متحكمات API
    ├── models/             # نماذج قاعدة البيانات
    ├── routes/             # مسارات API
    ├── views/              # قوالب EJS
    ├── scripts/            # سكريبتات مساعدة
    └── package.json        # اعتماديات الخادم
```

## مسارات API المتاحة

الخادم يقدم الملفات الثابتة من `public/` ويوفر المسارات التالية:
- GET / → `public/hp_index.html`
- GET /auth/login → صفحة تسجيل الدخول
- POST /auth/login → مصادقة المستخدم
- GET /auth/register → صفحة التسجيل
- POST /auth/register → إنشاء حساب
- POST /auth/logout → إنهاء جلسة
- GET /dashboard → محمي (يتطلب تسجيل الدخول)
- GET /course → محمي
- GET /certificate → محمي
- GET /certificate/download → إنشاء وتحميل شهادة PDF (محمي)
- GET /settings → صفحة الإعدادات (محمي)
- POST /settings/profile → تحديث الملف الشخصي
- POST /settings/password → تغيير كلمة المرور

## نشر المشروع للإنتاج

### الإعدادات
- ضبط `NODE_ENV=production`
- تعيين `SESSION_SECRET` لقيمة قوية وآمنة
- تكوين متغيرات قاعدة البيانات `DB_*` 
- اختيارياً تعيين `CORS_ORIGIN` للأصول المسموح بها
- التأكد من إعداد الوكيل العكسي لتمرير رؤوس `X-Forwarded-*` وتمكين خيار الوثوق بالوكيل (معالج بالفعل)

### أوامر النشر
```bash
# بناء الواجهة الأمامية
cd client
npm run build

# تشغيل الخادم في وضع الإنتاج
cd ../server
npm start
```

## ملاحظات
- النظام الحالي يحتوي على مصادقة بسيطة؛ يُنصح بإضافة تحقق من البريد الإلكتروني وإعادة تعيين كلمة المرور للإنتاج الكامل.
- إضافة HTTPS وإعداد نطاق ملفات تعريف الارتباط (cookies) بشكل صحيح على المضيف الحقيقي.
- تحديث `client/public/robots.txt` و `client/public/sitemap.xml` بنطاقك الحقيقي.

## التحسينات المستقبلية
1. تكامل نظام CI/CD للنشر التلقائي
2. إضافة اختبارات أتمتة للواجهة الأمامية والخلفية
3. تحسين أمان المصادقة بإضافة التحقق الثنائي
4. دعم تعدد اللغات بشكل كامل
5. تحسين تجربة المستخدم على الأجهزة المحمولة
