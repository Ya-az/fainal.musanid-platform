# ملخص تنظيم منصة مساند بعد التبسيط الأخير

بعد الدمج الكامل للبنية، أصبح المشروع يعتمد على تطبيق Express واحد مع قوالب EJS، وتم التخلص من النسخة المكررة التي كانت موجودة في مجلد `all-website-files`.

## ما الذي تغير؟

1. **توحيد الجذر**: إزالة أي مجلدات أو ملفات متكررة خارج المسارات الرئيسة (`src/`, `public/`, `docs/`).
2. **إلغاء الفصل القديم**: لم يعد هناك هيكل منفصل باسم `frontend/backend`; بدلاً من ذلك تتحكم `src/app.js` بجميع المسارات والصفحات.
3. **تنظيف السكربتات**: حذف سكربتات التشغيل والصيانة القديمة التي كانت تفترض وجود البنية السابقة.
4. **تحديث التوثيق**: إبقاء `README.md` و`README.en.md` و`GUIDE.md` كمراجع أساسية، مع ربط بقية الوثائق بها.

## البنية الحالية (2025)

```
musanidproject/
├── src/                # الخادم، النماذج، المسارات، القوالب
├── public/             # الأصول الجاهزة (CSS/JS/Images/Manifest)
├── docs/               # نسخة ثابتة وأدلة مساندة
├── tests/              # اختبارات Jest
├── package.json        # أوامر التشغيل والاعتماديات
├── tailwind.config.js  # إعدادات Tailwind
└── README.md           # التوثيق الأساسي (مع النسخة الإنجليزية)
```

### تفاصيل مجلد `src/`

- `app.js`: نقطة الدخول وتكوين الجلسات والحماية ودمج المسارات.
- `assets/`: ملفات Tailwind والسكربتات المصدرية قبل البناء.
- `config/`: إعدادات قاعدة البيانات ومتغيرات البيئة.
- `models/`: طبقة البيانات (الدروس، التقدم، المفضّلات، الشهادات...).
- `routes/`: مسارات الويب وواجهات API.
- `scripts/`: أدوات صيانة مثل فحص التحويلات.
- `views/`: قوالب EJS (layout، أجزاء مشتركة، صفحات كاملة).

## تشغيل المشروع الآن

```
Copy-Item .env.example .env   # أو cp للأجهزة الأخرى
npm install
npm run dev
```

- أمر `npm run dev:css` متاح لمراقبة Tailwind أثناء التطوير.
- للبناء: `npm run build:css` ثم `NODE_ENV=production npm start` بعد ضبط البيئة.

## نصائح سريعة

- `docs/` تُستخدم كمرجع أو نسخة عرض ولا تُدار عبر الخادم الرئيسي.
- يمكنك تشغيل `npm run check:legacy` للتأكد من أن جميع الروابط القديمة تُعيد التوجيه بشكل صحيح.
- راجع `IMPROVEMENTS.md` و`UPDATES.md` للاطلاع على سجلّ التغييرات وجدول العمل المستقبلي.