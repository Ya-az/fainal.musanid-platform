<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تسجيل الدخول - منصة مساند</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="../css/styles.css" rel="stylesheet">
</head>
<body>
    <header class="site-header" data-site-header data-base="../" data-nav-id="authNav" data-home="index.html" data-secondary-text="" data-primary-href="../course/cr_index.html"></header>

    <main>
        <section class="hero hero--light hero--compact">
            <div class="container">
                            </label>
                            <span class="badge badge--info">محمي ببروتوكولات التشفير</span>
                        </div>
                        <button type="submit" class="btn btn-primary btn--block">تسجيل الدخول</button>
                        <div class="form-helper is-hidden" id="loginMessage"></div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer" data-site-footer data-base="../"></footer>

    <script src="../js/components/header.js"></script>
    <script src="../js/components/footer.js"></script>
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const res = await fetch('/csrf-token', { credentials: 'include' });
                if (!res.ok) {
                    return;
                }

                const data = await res.json();
                if (!data?.csrfToken) {
                    return;
                }

                const form = document.getElementById('loginForm');
                if (!form) {
                    return;
                }

                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = '_csrf';
                input.value = data.csrfToken;
                form.prepend(input);
            } catch (error) {
                const helper = document.getElementById('loginMessage');
                if (helper) {
                    helper.textContent = 'تعذّر الاتصال بالخادم. سيُعاد المحاولة عند التحديث.';
                    helper.classList.remove('is-hidden');
                    helper.classList.add('is-error');
                }
            }
        });
    </script>
</body>
</html>