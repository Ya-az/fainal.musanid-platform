<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ - ููุตุฉ ูุณุงูุฏ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="../css/styles.css" rel="stylesheet">
    <link href="../css/auth.css" rel="stylesheet">
</head>
<body>
    <header class="site-header" 
            data-site-header 
            data-base="../" 
            data-active="register"
            data-primary-text="ุชุณุฌูู ุงูุฏุฎูู"
            data-primary-href="login.html"
            data-secondary-text="ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ"
            data-secondary-href="../index.html"
            data-secondary-variant="outline"></header>

    <main>
        <section class="hero hero--light hero--compact auth-hero">
            <div class="container split">
                <div class="card card--glass layout-stack">
                    <span class="pill pill--neutral align-start">ุฏูุงุฆู ููููุฉ ููุท</span>
                    <h1 class="section__title section__title--lg">ุงุจุฏุฃ ุฑุญูุฉ ุงูุชุนูู ูุน ุญุณุงุจ ูุณุงูุฏ ูุฌุงูู</h1>
                    <p class="text-muted">
                        ูู ุฎูุงู ุญุณุงุจ ูุงุญุฏ ุชุณุชุทูุน ุงููุตูู ุฅูู ุงูุฏูุฑุงุชุ ุญูุธ ุชูุฏููุ ุงุณุชูุงู ุงูุดูุงุฏุงุชุ ูุทูุจ ุงูุฏุนู ูู ุฎุจุฑุงุฆูุง ูู ุฃู ููุช.
                    </p>
                    <ul class="layout-stack layout-stack--sm text-body">
                        <li>๐ก ุฎุทุท ุชุนูู ูุฎุตุตุฉ ุชุจุฑุฒ ุฃูุฏุงูู ุงูููููุฉ.</li>
                        <li>๐งฉ ูุดุงุฑูุน ุนูููุฉ ูุดูุงุฏุงุช ุฑูููุฉ ูุนุชูุฏุฉ.</li>
                        <li>๐ค ูุฌุชูุน ูุดุท ููุฏุฑุจูู ูุฑุงููููู ุฎุทูุฉ ุจุฎุทูุฉ.</li>
                    </ul>
                    <div class="stat-card">
                        <div class="stat-card__value">+500 ุฃูู</div>
                        <div class="stat-card__label">ูุชุนูู ุงูุถููุง ุฅูููุง ุญุชู ุงูุขู</div>
                    </div>
                </div>

                <div class="card form layout-stack auth-card" aria-labelledby="signupTitle">
                    <h2 id="signupTitle" class="section__title section__title--md mb-0 form-title">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</h2>
                    <p class="text-muted form-subtitle">ุงููุฃ ุงูุจูุงูุงุช ุงูุชุงููุฉ ููุจุฏุก. ูู ูุณุชุบุฑู ุงูุฃูุฑ ุฃูุซุฑ ูู ุฏูููุชูู.</p>
                    <form id="signupForm" class="layout-stack" action="/auth/register" method="POST" novalidate>
                        <div class="form__row">
                            <div>
                                <label for="firstName" class="form-label">ุงูุงุณู ุงูุฃูู</label>
                                <input id="firstName" name="firstName" type="text" class="input-field" placeholder="ูุซุงู: ุณุงุฑุฉ" required>
                            </div>
                            <div>
                                <label for="lastName" class="form-label">ุงุณู ุงูุนุงุฆูุฉ</label>
                                <input id="lastName" name="lastName" type="text" class="input-field" placeholder="ูุซุงู: ุงูุนููุฑู" required>
                            </div>
                        </div>

                        <div>
                            <label for="email" class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                            <input id="email" name="email" type="email" class="input-field" placeholder="name@example.com" autocomplete="email" required>
                        </div>

                        <div class="form__row">
                            <div>
                                <label for="password" class="form-label">ูููุฉ ุงููุฑูุฑ</label>
                                <div class="input-group">
                                    <input id="password" name="password" type="password" class="input-field" placeholder="โขโขโขโขโขโขโขโข" minlength="8" autocomplete="new-password" required>
                                    <button type="button" id="togglePassword" class="input-group__btn" aria-label="ุฅุธูุงุฑ ูููุฉ ุงููุฑูุฑ" title="ุฅุธูุงุฑ ูููุฉ ุงููุฑูุฑ">
                                        <svg id="eyeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                        <svg id="eyeOffIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19M1 1l22 22M6.71 6.71l10.58 10.58"></path>
                                        </svg>
                                    </button>
                                </div>
                                <p class="form-helper">ูููุถูู ุงุณุชุฎุฏุงู 8 ุฃุญุฑู ุนูู ุงูุฃูู ูุน ูุฒูุฌ ูู ุงูุฑููุฒ ูุงูุฃุฑูุงู.</p>
                            </div>
                            <div>
                                <label for="confirmPassword" class="form-label">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                                <div class="input-group">
                                    <input id="confirmPassword" name="confirmPassword" type="password" class="input-field" placeholder="ุฃุนุฏ ูุชุงุจุฉ ูููุฉ ุงููุฑูุฑ" autocomplete="new-password" required>
                                    <button type="button" id="toggleConfirmPassword" class="input-group__btn" aria-label="ุฅุธูุงุฑ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ" title="ุฅุธูุงุฑ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ">
                                        <svg id="eyeIconConfirm" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                        <svg id="eyeOffIconConfirm" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19M1 1l22 22M6.71 6.71l10.58 10.58"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label for="track" class="form-label">ุงุฎุชุฑ ุงููุณุงุฑ ุงูุฃูุฑุจ ูุงูุชูุงูุงุชู</label>
                            <select id="track" name="track" class="input-field">
                                <option value="">ุณุฃูุฑุฑ ูุงุญููุง</option>
                                <option value="networking">ุงูุดุจูุงุช ูCisco Packet Tracer</option>
                                <option value="linux">ุฅุฏุงุฑุฉ ุฃูุธูุฉ Linux</option>
                                <option value="java">ุจุฑูุฌุฉ Java</option>
                                <option value="security">ุงูุฃูู ุงูุณูุจุฑุงูู</option>
                            </select>
                        </div>

                        <label class="checkbox-field">
                            <input type="checkbox" name="terms" required>
                            <span>ุฃูุงูู ุนูู <a href="#">ุดุฑูุท ุงูุงุณุชุฎุฏุงู</a> ู<a href="#">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a>.</span>
                        </label>

                        <button type="submit" class="btn btn-primary btn--block">ุฅูุดุงุก ุงูุญุณุงุจ</button>
                        <p class="form-helper text-center">
                            ูุฏูู ุญุณุงุจ ุจุงููุนูุ
                            <a class="link-accent" href="login.html">ุณุฌูู ุงูุฏุฎูู ุงูุขู</a>
                        </p>
                        <div class="form-helper is-hidden" id="signupMessage" role="alert"></div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer" data-site-footer data-base="../"></footer>

    <script src="../js/config.js"></script>
    <script src="../js/components/header.js"></script>
    <script src="../js/components/footer.js"></script>
    <script src="../js/certificate-manager.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('signupForm');
            const helper = document.getElementById('signupMessage');

            form?.addEventListener('submit', (event) => {
                if (!form.checkValidity()) {
                    helper?.classList.remove('is-hidden', 'is-success');
                    helper?.classList.add('is-error');
                    if (helper) {
                        helper.textContent = 'ุชุญููู ูู ุงูุญููู ูุฃุนุฏ ุงููุญุงููุฉ. ุชุฃูุฏ ูู ูุทุงุจูุฉ ูููุงุช ุงููุฑูุฑ ูุงูููุงููุฉ ุนูู ุงูุดุฑูุท.';
                    }
                    event.preventDefault();
                    return;
                }

                const password = form.querySelector('#password');
                const confirm = form.querySelector('#confirmPassword');
                if (password && confirm && password.value !== confirm.value) {
                    helper?.classList.remove('is-hidden', 'is-success');
                    helper?.classList.add('is-error');
                    if (helper) {
                        helper.textContent = 'ูููุชุง ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุชูู. ุงูุฑุฌุงุก ุงูุชุญูู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ.';
                    }
                    event.preventDefault();
                    confirm?.focus();
                    return;
                }

                const profile = {
                    firstName: form.querySelector('#firstName')?.value.trim() || '',
                    lastName: form.querySelector('#lastName')?.value.trim() || '',
                    fullName: `${form.querySelector('#firstName')?.value.trim() || ''} ${form.querySelector('#lastName')?.value.trim() || ''}`.trim(),
                    email: form.querySelector('#email')?.value.trim() || '',
                    preferredTrack: form.querySelector('#track')?.value || '',
                    shareCertificates: true
                };

                if (typeof certificateManager !== 'undefined') {
                    certificateManager.updateProfile(profile);
                } else if (window.localStorage) {
                    window.localStorage.setItem('musanid-user-profile', JSON.stringify({
                        ...profile,
                        updatedAt: new Date().toISOString()
                    }));
                }

                helper?.classList.remove('is-hidden', 'is-error');
                helper?.classList.add('is-success');
                if (helper) {
                    helper.textContent = 'ุชู ุฅูุดุงุก ุญุณุงุจู ุจูุฌุงุญ! ููููู ุงูุขู ูุชุงุจุนุฉ ุงูุฏูุฑุงุช ูุงุณุชูุงู ุงูุดูุงุฏุงุช ุงูุฑูููุฉ.';
                }

                event.preventDefault();
                form.reset();
            });

            // ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ
            const togglePassword = document.getElementById('togglePassword');
            const passwordField = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            const eyeOffIcon = document.getElementById('eyeOffIcon');

            togglePassword?.addEventListener('click', () => {
                const isPassword = passwordField.type === 'password';
                passwordField.type = isPassword ? 'text' : 'password';
                
                if (isPassword) {
                    eyeIcon.style.display = 'none';
                    eyeOffIcon.style.display = 'block';
                    togglePassword.setAttribute('aria-label', 'ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ');
                    togglePassword.setAttribute('title', 'ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ');
                } else {
                    eyeIcon.style.display = 'block';
                    eyeOffIcon.style.display = 'none';
                    togglePassword.setAttribute('aria-label', 'ุฅุธูุงุฑ ูููุฉ ุงููุฑูุฑ');
                    togglePassword.setAttribute('title', 'ุฅุธูุงุฑ ูููุฉ ุงููุฑูุฑ');
                }
            });

            // ุฅุธูุงุฑ/ุฅุฎูุงุก ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
            const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
            const confirmPasswordField = document.getElementById('confirmPassword');
            const eyeIconConfirm = document.getElementById('eyeIconConfirm');
            const eyeOffIconConfirm = document.getElementById('eyeOffIconConfirm');

            toggleConfirmPassword?.addEventListener('click', () => {
                const isPassword = confirmPasswordField.type === 'password';
                confirmPasswordField.type = isPassword ? 'text' : 'password';
                
                if (isPassword) {
                    eyeIconConfirm.style.display = 'none';
                    eyeOffIconConfirm.style.display = 'block';
                    toggleConfirmPassword.setAttribute('aria-label', 'ุฅุฎูุงุก ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ');
                    toggleConfirmPassword.setAttribute('title', 'ุฅุฎูุงุก ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ');
                } else {
                    eyeIconConfirm.style.display = 'block';
                    eyeOffIconConfirm.style.display = 'none';
                    toggleConfirmPassword.setAttribute('aria-label', 'ุฅุธูุงุฑ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ');
                    toggleConfirmPassword.setAttribute('title', 'ุฅุธูุงุฑ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ');
                }
            });

            // ุฅุฎูุงุก ุฃููููุงุช ุงูุนูู ุงููุบููุฉ ูู ุงูุจุฏุงูุฉ
            if (eyeOffIcon) eyeOffIcon.style.display = 'none';
            if (eyeOffIconConfirm) eyeOffIconConfirm.style.display = 'none';
        });
    </script>
</body>
</html>

